{% extends 'base.html' %}

{% block title %}Your Dashboard{% endblock title %}

{% block content %}
	
	<div class="d-flex flex-column align-items-center">
		<h2 class="text-center mt-4 mb-3">Register Project</h2>
		<div class="bg-white p-4 shadow" style="min-width: 500px;">
			<h5 class="mb-2">Project:</h5>
			<form method="post">
				{% csrf_token %}
				<div>
					{% if p_form.non_field_errors %}
						<ol>
							{% for error in p_form.non_field_errors %}
								<li><strong>{{error|escape}}</strong></li>
							{% endfor %}
						</ol>
					{% endif %}
				</div>
				<div class="fieldWrapper form-group">
					<label for="{{p_form.title.id_for_title}}">Title</label>
					<div class="form-group">
						<input type="text" name="title" id="id_title" class="form-control" value="{{request.user.student.project.title}}">
						<i class="fa-solid fa-circle-user input-icon"></i>
					</div>
					{% if p_form.title.errors %}
						<ul class="list-unstyled" style="margin-top: -0.9rem;">
							{% for error in p_form.title.errors %}
								<li class="text-danger font-italic small">{{error | escape}}</li>
							{% endfor %}
						</ul>
					{% endif %}
				</div>
				<div class="fieldWrapper form-group">
					<label for="{{p_form.case_study.id_for_case_study}}">Case Study</label>
					<div class="form-group">
						<input type="text" name="case_study" id="id_case_study" class="form-control" value="{{request.user.student.project.case_study}}">
						<i class="fa-solid fa-circle-user input-icon"></i>
					</div>
					{% if p_form.case_study.errors %}
						<ul class="list-unstyled" style="margin-top: -0.9rem;">
							{% for error in p_form.case_study.errors %}
								<li class="text-danger font-italic small">{{error | escape}}</li>
							{% endfor %}
						</ul>
					{% endif %}
				</div>
				<div class="form-check mb-2">
					<input type="checkbox" class="form-check-input" id="id_checkbox">
					<label for="id_checkbox" class="form-check-label">Group Project</label>
				</div>
				
				<div class="form-group select d-none">
					<label for="id_users">Add Group Members</label>
					<select multiple class="form-control" id="id_users" style="padding-left: 0.75rem;">
						{% for student in students %}
							<option value="{{student.pk}}">{{student.user.email}}</option>
						{% endfor %}
					</select>
				</div>
			</form>
		</div>
	</div>
{% endblock content %}

{% block domready %}

	const checkbox = document.querySelector('#id_checkbox')
	const select = document.querySelector('.select')

	checkbox.addEventListener('change', function(e) {
		select.classList.toggle('d-none')
	})

{% endblock domready %}